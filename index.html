<!DOCTYPE HTML>
<html>

<head>
    <title>Nhan N. TRAN</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="icon" type="image/png" href="images/icons8-dev-32.png">
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/masonry.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-61580972-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-61580972-2');
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

</head>

<body class="is-preload">

    <div id="wrapper">
        <section id="main">
            <header>
                <span class="avatar">
                    <img src="https://graph.facebook.com/100009055940380/picture?type=normal" alt="" />
                </span>
                <h1>Nhan N. TRAN</h1>
                <p>Software Engineer</p>
            </header>
            <a id="get-started" href="#" class="fa fa-3x fa-eye fab"></a>
            <hr />
            <footer>
                <ul class="icons">
                    <li>
                        <a href="https://www.linkedin.com/in/ngocnhan2003" target="_blank"
                            class="icon brands fa-linkedin">Linkedin</a>
                    </li>
                    <li>
                        <a href="https://instagram.com/ngocnhan2003" target="_blank"
                            class="icon brands fa-instagram">Instagram</a>
                    </li>
                    <li>
                        <a href="https://www.facebook.com/ngocnhan2003" target="_blank"
                            class="icon brands fa-facebook-f">Facebook</a>
                    </li>
                </ul>
            </footer>
        </section>
        <footer id="footer">
            <ul class="copyright">
                <!-- <li>Design: <a href="http://html5up.net">HTML5 UP</a></li> -->
            </ul>
        </footer>
    </div>

    <ul class="grid effect-4" id="grid"></ul>

    <span class="brands fa fa-instagram icon insta float"></span>

    <!-- Scripts -->
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="assets/js/classie.js"></script>
    <script src="assets/js/modernizr.custom.js"></script>
    <script src="assets/js/animOnScroll.js"></script>

    <script type="text/javascript">
        let loaded = false;

        function load_insta(end_cursor='') {
            let url = 'https://www.instagram.com/graphql/query/?query_hash=3e7706b09c6184d5eafd8b032dbcf487&variables={"tag_name":"ngocnhan2003","first":0,"after":"end_cursor"}';
            axios.get(url.replace('end_cursor', end_cursor))
                .then(function (response) {
                    let edge_hashtag_to_media = response.data.data.hashtag.edge_hashtag_to_media;
                    for (let edge of edge_hashtag_to_media.edges) {
                        let link = 'https://www.instagram.com/p/' + edge.node.shortcode;
                        $('#grid').append(`<li><img src="${edge.node.display_url}"></li>`);
                    }
                    if (edge_hashtag_to_media.page_info.has_next_page) {
                        load_insta(edge_hashtag_to_media.page_info.end_cursor);
                    } else {
                        loaded = true;
                    }
                })
                .catch(function (error) {
                    console.log(error);
                })
                .then(function () {
                    if (loaded) {
                        new AnimOnScroll(document.getElementById('grid'), {
                            minDuration: 0.4,
                            maxDuration: 0.7,
                            viewportFactor: 0.2
                        });
                    }
                });
        }
    </script>

    <script type="text/javascript">
        $('body').addClass(navigator.userAgent.match(/(MSIE|rv:11\.0)/) ? ' is-ie' : '');

        $(function () {
            $('body').removeClass('is-preload');
        });

        let page = $("html, body");
        let enableScroll = false;

        function scrollEvent(page, up = false) {
            page.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove", function(){
                page.stop();
            });

            page.animate({ scrollTop: up ? 0 : page[0].scrollHeight }, 40000, 'linear', function(){
                page.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove");
            });
        }

        $(window).scroll(function() {

            if($(window).scrollTop() + $(window).height() >= $(document).height() - 50) {
                scrollEvent(page, true);
            }
            if (enableScroll) {
                if ($(window).scrollTop() <= 50) {
                    scrollEvent(page);
                }
            }
        });

        load_insta();

        $('#get-started').click(() => {
            $('.avatar').addClass('hide-bf');
            $('#main').animate({
                opacity: '0.0',
                padding: '0px',
                margin: '0px'
            }, 700, function () {
                $('#wrapper').animate({
                    height: '0',
                    padding: '0',
                    minHeight: '0'
                }, 1700, function() {
                    $('#wrapper').hide();
                    enableScroll = true;
                    scrollEvent(page);
                });
            });
        });
    </script>
</body>
</html>
